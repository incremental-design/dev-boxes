---
- hosts: raspberrypi

  tasks:
    - name: Update DHCP servers.
      shell: >
        echo "static domain_name_servers=1.1.1.1 1.0.0.1" >> /etc/dhcpcd.conf && service dhcpcd restart && sleep 5
      args:
        executable: /bin/bash

    - name: Switch apt repository mirrors and then update package list.
      shell: >
        sed -i 's/raspbian.raspberrypi.org/mirror.glennmcgurrin.com/' /etc/apt/sources.list &&
        apt-get update
      args:
        warn: false
        
    - name: Install tshark, tmux, mosh, nmap, nginx, iperf3, htop
      shell: >
        apt-get install tshark tmux mosh nmap nginx iperf3 htop
      args:
        warn: false

#     - name: Install tshark.
#       apt:
#         name: tshark
#         state: present
# 
#     - name: Install tmux.
#       apt:
#         name: tmux
#         state: present
# 
#     - name: Install mosh.
#       apt:
#         name: mosh
#         state: present
# 
#     - name: Install nmap.
#       apt:
#         name: nmap
#         state: present
# 
#     - name: Install nginx.
#       apt:
#         name: nginx
#         state: present
# 
#     - name: Install iPerf3.
#       apt:
#         name: iperf3
#         state: present
# 
#     - name: Install htop.
#       apt:
#         name: htop
#         state: present

    - name: Shut down pi.
      shell: >
        shutdown now -h
      args:
        executable: /bin/bash
